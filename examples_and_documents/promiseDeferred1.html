<html>
<head>
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
	<script type="text/javascript" src="js/Hydra.js"></script>
	<script type="text/javascript" src="js/BasicErrorHandler.js"></script>
	<script type="text/javascript" src="js/Deferred.js"></script>
	<script type="text/javascript" src="js/jQuery/DOM.js"></script>
	<script type="text/javascript" src="js/jQuery/Ajax.js"></script>
	<script type="text/javascript" src="js/jQuery/Events.js"></script>
</head>
<body>
<script type="text/javascript">
	var oPromise = new Hydra.promise();
	var oPromise2 = new Hydra.promise();
	oPromise.then( function ( oResult ) {
				alert( "Good!" + oResult );
			},
			function ( oResult ) {
				alert( "Not Good!" + oResult );
			} );
	oPromise2.then( function ( oResult ) {
				alert( "Really Good!" + oResult );
			},
			function ( oResult ) {
				alert( "Worst!" + oResult );
			} );

	var oDeferred = new Hydra.deferred();
	oDeferred.add( oPromise ).add( oPromise2 ).then( function () {alert( "all ok" );}, function () { alert( "all goes wrong!" );} );

	$.ajax( {
		url: "test2.php",
		success: function ( oData ) {
			oPromise.resolve( oData );
		},
		error: function ( oData ) {
			oPromise.reject( oData );
		}
	} );

	$.ajax( {
		url: "test.php",
		success: function ( oData ) {
			oPromise2.resolve( oData );
		},
		error: function ( oData ) {
			oPromise2.reject( oData );
		}
	} );


</script>
</body>
</html>