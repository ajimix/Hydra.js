(function(){var u,n,l,g,j,w,c,r,x,C,E,A,m,y,z;function k(){var F=+new Date()+"",G=Math.floor(Math.random()*(999999-1+1))+1;return F+"_"+G}function o(F){var H,G;if(Object.keys){H=Object.keys(F).length}else{H=0;for(G in F){if(v(F,G)){H++}}}return H}if(typeof Object.create!=="function"){Object.create=function(F){function G(){}G.prototype=F;return new G()}}y=typeof exports==="object"&&typeof module==="object"&&typeof module.exports==="object"&&typeof require==="function";n="undefined";z=Object.prototype;u=this;j=null;w=false;l={};c="3.0.0";x=w;function t(F){return z.toString.call(F)}function b(F){return t(F)==="[object Function]"}function q(F){return t(F)==="[object Array]"}function a(F){x=F}function s(G,F){return[].slice.call(G,F||0)}function v(F,G){return F.hasOwnProperty(G)}function D(H,G,K,J){var I,F;I=l[H];if(J&&this.isModuleStarted(H,G)){this.stop(H,G)}if(typeof I!==n){F=p(H);I.instances[G]=F;F.__instance_id__=G;if(typeof K!==n){F.init(K)}else{F.init()}}I=F=j;return F}function d(G,F){var H;for(H in F){if(v(F,H)){G[H]=F[H]}}return G}function f(G,I,H,F){G[I]=(function(K,J){return function(){var M=s(arguments,0);try{return J.apply(this,M)}catch(L){C.log(H,K,L)}finally{M=j}}}(I,F))}m={global:{}};function i(G,H){var F=[],I;if(typeof G!=="undefined"){for(I in G){if(v(G,I)){if(I===H){F=G[I]}}}}return F}A={subscribers:function(F,G){return i(m[F],G)},subscribe:function(F,H){var I,G;if(typeof H.oEventsCallbacks==="undefined"){return false}G=H.oEventsCallbacks;if(typeof m[F]==="undefined"){m[F]={}}for(I in G){if(v(G,I)){if(typeof m[F][I]==="undefined"){m[F][I]=[]}m[F][I].push({subscriber:H,handler:G[I]})}}return true},unsubscribe:function(I,K){var M,J,H,F=0,L,G=0;if(typeof K.oEventsCallbacks==="undefined"||typeof m[I]==="undefined"){return false}J=K.oEventsCallbacks;for(M in J){if(v(J,M)){if(typeof m[I][M]!=="undefined"){H=m[I][M];L=H.length;for(;F<L;F++){if(H.subscriber===K){G++;m[I][M].splice(F,1)}}}}}return G>0},publish:function(H,K,L){var G=this.subscribers(H,K),F=0,J=G.length,I;if(J===0){return false}for(;F<J;F++){I=G[F];I.handler.call(I.subscriber,L);C.log(H,K,I)}return true},reset:function(){m={global:{}}}};function h(G,I){var H,F;H=l[G].creator(I);H.__module_id__=G;F=H.init||function(){};H.__action__=I;H.oEventsCallbacks=H.oEventsCallbacks||{};H.init=function(J){var K=s(arguments,0).concat(g);I.subscribe(G,H);F.apply(this,K)};H.handleAction=function(K){var J=this.oEventsCallbacks[K.type];if(typeof J===n){return}J.call(this,K)};H.onDestroy=H.onDestroy||function(){};H.destroy=function(){this.onDestroy();I.unsubscribe(G,H)};return H}function p(H){var G,I,F;if(typeof l[H]===n){throw new Error("The module "+H+" is not registered!")}I="";F=function(){};G=h(H,A);if(!x){for(I in G){if(v(G,I)){F=G[I];if(!b(F)){continue}f(G,I,H,F)}}}try{return G}finally{G=I=F=j}}C=u.console||{log:function(){}};E=function(){};E.prototype={type:"Module",getInstance:p,register:function(G,F){l[G]={creator:F,instances:{}};return l[G]},_merge:function(J,F){var G,I,H;G={};H=function(K){return function(){var L=s(arguments,0);K.apply(this,L)}};G.__super__={};G.__super__.__instance__=J;G.__super__.__call__=function(L,M){var K=this;while(v(K,L)===w){K=K.__instance__.__super__}K[L].apply(G,M)};for(I in J){if(v(J,I)){if(I==="__super__"){continue}G[I]=J[I]}}for(I in F){if(v(F,I)){if(typeof G.__super__!==n&&b(G[I])){G.__super__[I]=(H(G[I]))}G[I]=F[I]}}try{return G}finally{G=j;I=j}},extend:function(L,H,J){var G,K,O,I,M,F,N;N=this;G=l[L];K=L;O=function(){};if(typeof H==="string"){K=H;O=J}else{O=H}if(typeof G===n){return}M=O(A);I=G.creator(A);l[K]={creator:function(P){F=N._merge(I,M);F.__action__=P;return F},instances:{}}},setInstance:function(H,G,F){var I=l[H];if(!I){throw new Error("The module "+H+" is not registered!")}I.instances[G]=F;return I},setVars:function(F){if(typeof g!==n){g=d(g,F)}else{g=F}},getVars:function(){return d({},g)},start:function(O,Q,H,J){var F=q(O),L,I,N,P,G,M,K;if(F){L=O.slice(0);if(q(Q)){I=Q.slice(0)}if(q(H)){N=H.slice(0)}if(q(J)){P=J.slice(0)}for(G=0,M=L.length;G<M;G++){O=L[G];Q=I&&I[G]||k();H=N&&N[G]||H;J=P&&P[G]||J;D(O,Q,H,J)}}else{if(typeof Q!=="string"){H=Q;J=H;Q=k()}D(O,Q,H,J)}},isModuleStarted:function(H,F){var G=false;if(typeof F===n){G=(typeof l[H]!==n&&o(l[H].instances)>0)}else{G=(typeof l[H]!==n&&typeof l[H].instances[F]!==n)}return G},startAll:function(){var F,G;for(F in l){if(v(l,F)){G=l[F];if(typeof G!==n){this.start(F,k())}}}F=j},stop:function(H,F){var J,G,K,I;J=l[H];if(typeof J===n){return false}if(typeof F!==n){G=J.instances[F];if(typeof J!==n&&typeof G!==n){G.destroy()}}else{K=J.instances;for(I in K){if(v(K,I)){G=K[I];if(typeof J!==n&&typeof G!==n){G.destroy()}}}}J=G=j;return true},stopAll:function(){var G,H,F;for(G in l){if(v(l,G)){H=l[G];if(typeof H!==n){for(F in H.instances){if(v(H.instances,F)){this.stop(G,F)}}}}}G=j},_delete:function(F){if(typeof l[F]!==n){delete l[F]}},remove:function(F){var G=l[F];if(typeof G===n){return null}if(typeof G!==n){try{return G}finally{G=j;this._delete(F)}}}};function e(){return C}function B(F){C=F}r=function(){};r.version=c;r.bus=A;r.errorHandler=e;r.setErrorHandler=B;r.module=new E();r.setDebug=a;r.getDebug=function(){return x};r.extend=function(G,F){if(typeof this[G]===n){this[G]=F}else{this[G]=d(this[G],F)}};r.noConflict=function(G,F,H){if(typeof this[G]!==n){F[H]=this[G];return true}return false};u.Hydra=r;if(y){module.exports=r}else{if(typeof define!=="undefined"){define(function(){return r})}}}.call(this));