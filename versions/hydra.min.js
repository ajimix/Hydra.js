(function(){"use strict";function p(){var a=+new Date+"",b=Math.floor(999999*Math.random())+1;return a+"_"+b}function q(a){var b,c;if(Object.keys)b=Object.keys(a).length;else{b=0;for(c in a)w(a,c)&&b++}return b}function r(a){return o.toString.call(a)}function s(a){return"[object Function]"===r(a)}function t(a){return"[object Array]"===r(a)}function u(a){i=a}function v(a,b){return[].slice.call(a,b||0)}function w(a,b){return a.hasOwnProperty(b)}function x(a,d,e,f,g){var h,i;return h=c[d],g&&a.isModuleStarted(d,e)&&a.stop(d,e),typeof h!==b&&(i=C(d),h.instances[e]=i,i.__instance_id__=e,typeof f!==b?i.init(f):i.init()),i}function y(a,b){var c;for(c in b)w(b,c)&&(a[c]=b[c]);return a}function z(a,b,c,d){a[b]=function(a,b){return function(){var d=v(arguments,0);try{return b.apply(this,d)}catch(e){return j.log(c,a,e),!1}}}(b,d)}function A(a,b){var d,c=[];if(a!==void 0)for(d in a)w(a,d)&&d===b&&(c=a[d]);return c}function B(a,e){var f,g;return f=c[a].creator(e),f.__module_id__=a,g=f.init||function(){},f.__action__=e,f.oEventsCallbacks=f.oEventsCallbacks||{},f.init=function(){var a=v(arguments,0).concat(d);e.subscribe("global",f,!0),g.apply(this,a)},f.handleAction=function(a){var c=this.oEventsCallbacks[a.type];typeof c!==b&&c.call(this,a)},f.onDestroy=f.onDestroy||function(){},f.destroy=function(){this.onDestroy(),e.unsubscribe("global",f,!0)},f}function C(a){var d,e;if(typeof c[a]===b)throw Error("The module "+a+" is not registered!");if(d=B(a,l),!i)for(e in d)w(d,e)&&s(d[e])&&z(d,e,a,d[e]);return d}function D(){return j}function E(a){j=a}var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),n="object"==typeof exports&&"object"==typeof module&&"object"==typeof module.exports&&"function"==typeof require,b="undefined",o=Object.prototype,a=this,e=null,f=!1,c={},g="3.0.2",i=f,m={global:{}},l={subscribers:function(a,b){return A(m[a],b)},_getChannelEvents:function(a,b,c){var d,e,f;return e=a[0],"global"===e?(d=e,f=a[1]):(d=b,f=c),m[d][f]===void 0&&(m[d][f]=[]),m[d][f]},_addSubscribers:function(a,b,c,d){var e,f,g,h=b||!1;for(e in a)if(w(a,e)){if(f=e.split(":"),h&&"global"!==f[0]||!h&&"global"===f[0])continue;g=this._getChannelEvents(f,c,e),g.push({subscriber:d,handler:a[e]})}},subscribe:function(a,b,c){return b.oEventsCallbacks===void 0?!1:(m[a]===void 0&&(m[a]={}),this._addSubscribers(b.oEventsCallbacks,c,a,b),!0)},_removeSubscribers:function(a,c){var d,e=0,f=0;if(typeof a!==b)for(d=a.length;d>e;e++)a[e].subscriber===c&&(f++,a.splice(e,1));return f},_removeSubscribersPerEvent:function(a,b,c,d){var e,f,g,h,j,i=b||!1;for(e in a)if(w(a,e)){if(f=e.split(":"),i&&"global"!==f[0]||!i&&"global"===f[0])continue;g=c,h=e,"global"===f[0]&&(g=f[0],h=f[1]),j=this._removeSubscribers(m[g][h],d)}return j},unsubscribe:function(a,b,c){var d,e=b.oEventsCallbacks;return e===void 0||m[a]===void 0?!1:(d=this._removeSubscribersPerEvent(e,c,a,b),d>0)},_avoidBlockUI:function(a,b,c,d){var e,f=a.concat();setTimeout(function g(){var a=+new Date;do e=f.shift(),e.handler.call(e.subscriber,b),i&&j.log(c,d,e);while(f.length>0&&50>+new Date-a);f.length>0&&setTimeout(g,25)},25)},publish:function(a,b,c){var d=this.subscribers(a,b),e=d.length;return 0===e?!1:(this._avoidBlockUI(d,c,a,b),!0)},reset:function(){m={global:{}}}},j=a.console||{log:function(){}},k=function(){},k.prototype={type:"Module",getInstance:C,register:function(a,b){return c[a]={creator:b,instances:{}},c[a]},_setSuper:function(a,b){a.__super__={},a.__super__.__instance__=b,a.__super__.__call__=function(b,c){for(var d=this;w(d,b)===f;)d=d.__instance__.__super__;d[b].apply(a,c)}},callInSuper:function(a){return function(){var b=v(arguments,0);a.apply(this,b)}},_mergeModuleExtended:function(a,c){var d;for(d in c)w(c,d)&&(typeof a.__super__!==b&&s(a[d])&&(a.__super__[d]=this.callInSuper(a[d])),a[d]=c[d])},_mergeModuleBase:function(a,b){var c;for(c in b)w(b,c)&&"__super__"!==c&&(a[c]=b[c])},_merge:function(a,b){var c={};return this._setSuper(c,a),this._mergeModuleBase(c,a),this._mergeModuleExtended(c,b),c},extend:function(a,d,e){var f,g,h,i,j,k,m;m=this,f=c[a],g=a,h=function(){},"string"==typeof d?(g=d,h=e):h=d,typeof f!==b&&(j=h(l),i=f.creator(l),c[g]={creator:function(a){return k=m._merge(i,j),k.__action__=a,k},instances:{}})},setInstance:function(a,b,d){var e=c[a];if(!e)throw Error("The module "+a+" is not registered!");return e.instances[b]=d,e},setVars:function(a){d=typeof d!==b?y(d,a):a},getVars:function(){return y({},d)},_multiModuleStart:function(a,b,c,d){var e,f,g,h,i,j;for(t(b)&&(e=b.slice(0)),t(c)&&(f=c.slice(0)),t(d)&&(g=d.slice(0)),h=0,i=a.length;i>h;h++)j=a[h],b=e&&e[h]||p(),c=f&&f[h]||c,d=g&&g[h]||d,x(this,j,b,c,d)},_singleModuleStart:function(a,b,c,d){"string"!=typeof b&&(c=b,d=c,b=p()),x(this,a,b,c,d)},start:function(a,b,c,d){var e=t(a);e?this._multiModuleStart(a.slice(0),b,c,d):this._singleModuleStart(a,b,c,d)},isModuleStarted:function(a,d){var e=!1;return e=typeof d===b?typeof c[a]!==b&&q(c[a].instances)>0:typeof c[a]!==b&&typeof c[a].instances[d]!==b},startAll:function(){var a,d;for(a in c)w(c,a)&&(d=c[a],typeof d!==b&&this.start(a,p()))},_multiModuleStop:function(a){var c,e,d=a.instances;for(c in d)w(d,c)&&(e=d[c],typeof a!==b&&typeof e!==b&&e.destroy())},_singleModuleStop:function(a,c,d){var e=a.instances[d];typeof a!==b&&typeof e!==b&&e.destroy()},stop:function(a,d){var e;return e=c[a],typeof e===b?!1:(typeof d!==b?this._singleModuleStop(e,a,d):this._multiModuleStop(e),!0)},_stopOneByOne:function(a,b){var c;for(c in a)w(a,c)&&this.stop(b,c)},stopAll:function(){var a;for(a in c)w(c,a)&&typeof c[a]!==b&&this._stopOneByOne(c[a].instances,a)},_delete:function(a){typeof c[a]!==b&&delete c[a]},remove:function(a){var d=c[a];if(typeof d===b)return null;if(typeof d!==b)try{return d}finally{this._delete(a)}return null}},h=function(){},h.version=g,h.bus=l,h.errorHandler=D,h.setErrorHandler=E,h.module=new k,h.setDebug=u,h.getDebug=function(){return i},h.extend=function(a,c){this[a]=typeof this[a]===b?c:y(this[a],c)},h.noConflict=function(a,c,d){return typeof this[a]!==b?(c[d]=this[a],!0):!1},a.Hydra=h,n?module.exports=h:"undefined"!=typeof define&&define(function(){return h})}).call(this);