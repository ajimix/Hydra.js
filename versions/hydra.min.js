(function(w,E,t){var o,D,l,i,d,n,y,h,g,r,z,C,F,f,A,e,b,s;if(E===t){E=w}if(w.document){D=w.document}n=null;y=false;h=true;o={};i=w.console;d=/resolve/g;g="2.0.0";z=y;A={};function v(G){return{}.toString.call(G)}function c(G){return v(G)==="[object Function]"}function q(G){return v(G)==="[object Array]"}function a(G){z=G}function u(H,G){return[].slice.call(H,G||0)}function x(G,H){return G.hasOwnProperty(H)}function k(H,J,I,G){H[J]=(function(L,K){return function(){var N=u(arguments,0);try{return K.apply(this,N)}catch(M){C.log(I,L,M)}finally{N=n}}}(J,G))}function m(H,J){var I,G;I=o[H].creator(J);G=I.init;I.__action__=J;I.oEventsCallbacks=I.oEventsCallbacks||{};I.aListeningEvents=(function(){var L=I.oEventsCallbacks,M,K=[];for(M in L){if(L.hasOwnProperty(M)){K.push(M)}}L=M=null;return K}());I.init=function(K){var L=u(arguments).concat(l);J.listen(this.aListeningEvents,this.handleAction,this);G.apply(this,L)};I.handleAction=function(L){var K=this.oEventsCallbacks[L.type];if(K===t){return}K.call(this,L)};I.onDestroy=I.onDestroy||function(){};I.destroy=function(){this.onDestroy();J.stopListen(this.aListeningEvents,this)};return I}function p(I){var K,H,J,G;if(o[I]===t){throw new Error("The module is not registered!")}K=new f();J="";G=function(){};H=m(I,K);if(!z){for(J in H){if(x(H,J)){G=H[J];if(!c(G)){continue}k(H,J,I,G)}}}try{return H}finally{K=n;H=n;J=n;G=n}}C=function(){};C.type="ErrorHandler";C.list=n;C._create_dom=function(){var G,I,H;G=D.createElement("div");I=D.createElement("ul");H=G.style;this.list=I;H.display="none";H.position="fixed";H.height="100px";H.width="100%";H.bottom="0px";G.appendChild(I);D.body.appendChild(G);G=n;I=n;H=n};C.addItem=function(H,G,I){var J;J=D.createElement("li");J.appendChild(D.createTextNode(H+"/"+G+": "+I.message));this.list.appendChild(J);J=n};C.log=function(){var G;G=u(arguments,0).concat();if(i===t||(typeof G[G.length-1]==="boolean"&&!G[G.length-1])){if(this.list===n){this._create_dom()}this.addItem.apply(this,G);C.__old_log__=C.log;this.log=function(){var H=u(arguments,0).concat();this.addItem.apply(this,H);H=n}}else{i.log.apply(i,G);C.__old_log__=C.log;this.log=function(){var H=u(arguments,0).concat();i.log.apply(i,H);H=n}}G=n};F=function(){};F.prototype={type:"Module",register:function(H,G){o[H]={creator:G,instances:{}};return o[H]},_merge:function(L,G,J){var H,K,I;H={};I=function(M){return function(){var N=u(arguments,0);M.apply(this,N)}};if(J){H.__super__={};H.__super__.__instance__=L;H.__super__.__call__=function(N,O){var M=this;while(x(M,N)===y){M=M.__instance__.__super__}M[N].apply(H,O)}}for(K in L){if(x(L,K)){if(K==="__super__"){continue}H[K]=L[K]}}for(K in G){if(x(G,K)){if(H.__super__!==t&&c(H[K])){H.__super__[K]=(I(H[K]));H[K]=G[K]}else{H[K]=G[K]}}}try{return H}finally{H=n;K=n}},extend:function(M,I,K){var H,L,P,J,N,G,O;H=o[M];L=M;P=function(Q){return Q};if(typeof I==="string"){L=I;P=K}else{P=I}if(H===t){return}O=new f();N=P(O);J=H.creator(O);G=this._merge(J,N,(L!==M));G.__action__=O;o[L]={creator:(function(Q){return function(){return Q}}(G)),instances:{}};H=n;L=n;P=n;J=n;N=n;G=n;O=n},_simpleMerge:function(H,G){var I;for(I in G){if(x(G,I)){H[I]=G[I]}}return H},setVars:function(G){if(typeof l!=="undefined"){l=this._simpleMerge(l,G)}else{l=G}},getVars:function(){return this._simpleMerge({},l)},test:function(G,H){if(jstestdriver){a(h);H(p(G));a(y)}},getModule:function(I,H){var J=o[I],G;if(jstestdriver){G=p(I);J.instances[H]=G;return J}return null},start:function(I,H,L,K){var J,G;J=o[I];if(K&&this.isModuleStarted(I,H)){this.stop(I,H)}if(J!==t){G=p(I);J.instances[H]=G;G.__container__=D.getElementById(H);if(typeof L!=="undefined"){G.init(L)}else{G.init()}}J=n;return G},isModuleStarted:function(H,G){return(typeof o[H]!==t&&o[H].instances[G]!==t)},startAll:function(){var G,H;for(G in o){if(x(o,G)){H=o[G];if(H!==t){this.start(G,Math.random())}}}G=n},stop:function(I,H){var J,G;J=o[I];if(J===t){return false}G=J.instances[H];if(J!==t&&G!==t){G.destroy()}J=G=n;return true},stopAll:function(){var H,I,G;for(H in o){if(x(o,H)){I=o[H];if(I!==t){for(G in I.instances){if(x(I.instances,G)){this.stop(H,G)}}}}}H=n},_delete:function(G){if(o[G]!==t){delete o[G]}},remove:function(G){var H=o[G];if(H===t){return null}if(H!==t){try{return H}finally{H=n;this._delete(G)}}}};f=function(){};f.prototype={type:"Action",listen:function(K,I,L){var H,G,J;H="";J=K.length;for(G=0;G<J;G=G+1){H=K[G];if(A[H]===t){A[H]=[]}A[H].push({module:L,handler:I})}},notify:function(J){var L,K,G,I,H;L=J.type;K=n;if(A[L]===t){return}G=A[L].slice();H=G.length;for(I=0;I<H;I=I+1){K=G[I];K.handler.call(K.module,J)}L=n;G=n;I=n;H=n;K=n},stopListen:function(N,L){var H,K,G,J,M,I;H="";K=[];J=N.length;M=0;I=0;for(G=0;G<J;G=G+1){K=[];H=N[G];I=A[H].length;for(M=0;M<I;M=M+1){if(L!==A[H][M].module){K.push(A[H][M])}}A[H]=K;if(A[H].length===0){delete A[H]}}H=n;K=n;G=n;J=n;M=n;I=n},__restore__:function(){A={}}};e=function(){this.aPending=[];this.bCompleted=y;this.sType="";this.oResult=n;this.oAction=r.action();this.resolve=(function(G){return function(H){G.bCompleted=h;G.sType="resolve";G.oResult=H;G.oAction.notify({type:"complete"})}}(this));this.reject=(function(G){return function(H){G.bCompleted=h;G.sType="reject";G.oResult=H;G.oAction.notify({type:"complete"})}}(this))};e.prototype.then=function(G,H){this.aPending.push({resolve:G,reject:H});return this};b=function(){this.aPromises=[];this.aPending=[];this.sType="";this.oAction=r.action();this.oAction.listen(["complete"],this.checkCompleted,this)};b.prototype={add:function(G){this.aPromises.push(G);return this},checkCompleted:function(){var I,G,H;G=this.aPromises.length;H=n;for(I=0;I<G;I++){H=this.aPromises[I];if(!H.bCompleted){return y}}this.complete(this.getType());I=n;G=n;H=n},getType:function(){var J,H,I,G,K;H=this.aPromises.length;I=n;G=[];for(J=0;J<H;J++){I=this.aPromises[J];if(I.bCompleted){G.push(I.sType)}}if(G.length===0){return""}K=G.join("").replace(d,"").length>0?"reject":"resolve";try{return K}finally{J=n;H=n;I=n;G=n}},complete:function(J){var I,G,H;if(J.length===0){return y}G=this.aPromises.length;for(I=0;I<G;I++){H=this.aPromises[I];while(H.aPending[0]){H.aPending.shift()[J](H.oResult)}}while(this.aPending[0]){this.aPending.shift()[J]()}I=n;G=n;H=n},then:function(G,H){this.aPending.push({resolve:G,reject:H});return this}};s=function(){var K,I,J,G,H;K=u(arguments,0);J=K.length;H=n;this.oDeferred=G=new b();for(I=0;I<J;I++){H=K[I];if(H instanceof e){G.add(H)}else{G.complete("resolved");return}}try{return G}finally{K=n;I=n;J=n;H=n}};function j(){return C}function B(G){C=G}r=function(){};r.version=g;r.action=function(){return new f()};r.errorHandler=j;r.setErrorHandler=B;r.module=new F();r.setDebug=a;r.deferred=b;r.promise=e;r.when=s;E.Hydra=r}(this));