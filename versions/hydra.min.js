!function(){"use strict";function t(){var t=+new Date+"",e=Math.floor(999999*Math.random())+1;return t+"_"+e}function e(t){var e,n;if(Object.keys)e=Object.keys(t).length;else{e=0;for(n in t)f(t,n)&&e++}return e}function n(t){return C.toString.call(t)}function r(t){return"[object Function]"===n(t)}function o(t){return"[object Array]"===n(t)}function i(t){x=t}function u(t){w=t}function s(t,e){return[].slice.call(t,e||0)}function f(t,e){return t.hasOwnProperty(e)}function c(t,e,n,r){var o;for(o in e)e.hasOwnProperty(o)&&t[o]&&"function"==typeof e[o]&&e[o](t,n,r)}function a(t,e,n,r,o){var i,u;return i=m[e],o&&t.isModuleStarted(e,n)&&t.stop(e,n),typeof i!==g&&(u=h(e),i.instances[n]=u,u.__instance_id__=n,c(u,t.oModifyInit,r,o),typeof r!==g?u.init(r):u.init()),u}function l(t,e){var n;for(n in e)f(e,n)&&(t[n]=e[n]);return t}function d(t,e,n,r){t[e]=function(t,e){return function(){var r=s(arguments,0);try{return e.apply(this,r)}catch(o){return D.log(n,t,o),!1}}}(e,r)}function p(t,e){var n,r=[];if("undefined"!=typeof t)for(n in t)f(t,n)&&n===e&&(r=t[n]);return r}function _(t,e){var n,r;return n=m[t].creator(e),n.__module_id__=t,r=n.init||function(){},n.__action__=e,n.events=n.events||{},n.init=function(){var t=s(arguments,0).concat(M);e.subscribe(n),r.apply(this,t)},n.handleAction=function(t){var e=this.events[t.type];typeof e!==g&&e.call(this,t)},n.onDestroy=n.onDestroy||function(){},n.destroy=function(){this.onDestroy(),e.unsubscribe(n)},n}function h(t){var e,n;if(typeof m[t]===g)throw new Error("The module "+t+" is not registered!");if(e=_(t,T),!x)for(n in e)f(e,n)&&r(e[n])&&d(e,n,t,e[n]);return e}function y(){return D}function b(t){D=t}var v,g,m,M,S,w,I,E,O,j,x,D,B,T,k,A,C;"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),A="object"==typeof exports&&"object"==typeof module&&"object"==typeof module.exports&&"function"==typeof require,g="undefined",C=Object.prototype,v=this,S=null,I=!1,m={},E="3.1.3",x=I,w=I,k={global:{}},T={subscribers:function(t,e){return p(k[t],e)},_getChannelEvents:function(t,e){return"undefined"==typeof k[t]&&(k[t]={}),"undefined"==typeof k[t][e]&&(k[t][e]=[]),k[t][e]},_addSubscribers:function(t,e,n){var r;for(r in t)f(t,r)&&this.subscribeTo(e,r,t[r],n)},unsubscribeFrom:function(t,e,n){for(var r,o=this._getChannelEvents(t,e),i=o.length-1;i>=0;i--)r=o[i],r.subscriber===n&&o.splice(i,1)},subscribeTo:function(t,e,n,r){var o=this._getChannelEvents(t,e);o.push({subscriber:r,handler:n})},subscribe:function(t){var e,n=t.events;if(!t||"undefined"==typeof n)return!1;for(e in n)f(n,e)&&("undefined"==typeof k[e]&&(k[e]={}),this._addSubscribers(n[e],e,t));return!0},_removeSubscribers:function(t,e){var n,r=0,o=0;if(typeof t!==g)for(n=t.length;n>r;r++)t[r].subscriber===e&&(o++,t.splice(r,1));return o},_removeSubscribersPerEvent:function(t,e,n){var r,o,i,u,s=0;for(r in t)f(t,r)&&(o=r.split(":"),i=e,u=r,"global"===o[0]&&(i=o[0],u=o[1]),s+=this._removeSubscribers(k[i][u],n));return s},unsubscribe:function(t){var e,n=0,r=t.events;if(!t||"undefined"==typeof r)return!1;for(e in r)f(r,e)&&("undefined"==typeof k[e]&&(k[e]={}),n=this._removeSubscribersPerEvent(r[e],e,t));return n>0},_avoidBlockUI:function(t,e,n,r){var o,i=t.concat();setTimeout(function u(){var t=+new Date;do o=i.shift(),o.handler.call(o.subscriber,e),x&&D.log(n,r,o);while(i.length>0&&+new Date-t<50);i.length>0&&setTimeout(u,25)},25)},publish:function(t,e,n){var r,o,i=this.subscribers(t,e).slice(),u=i.length;if(0===u)return!1;if(w)this._avoidBlockUI(i,n,t,e);else for(r=0;u>r;r++)o=i[r],o.handler.call(o.subscriber,n),x&&D.log(t,e,o);return!0},reset:function(){k={global:{}}}},D=v.console||{log:function(){}},B=function(){},B.prototype={type:"Module",getInstance:h,oModifyInit:{},register:function(t,e){return m[t]=new O(t,e),m[t]},_setSuper:function(t,e){t.__super__={},t.__super__.__instance__=e,t.__super__.__call__=function(e,n){for(var r=this;f(r,e)===I;)r=r.__instance__.__super__;r[e].apply(t,n)}},_callInSuper:function(t){return function(){var e=s(arguments,0);t.apply(this,e)}},_mergeModuleExtended:function(t,e){var n;for(n in e)f(e,n)&&(typeof t.__super__!==g&&r(t[n])&&(t.__super__[n]=this._callInSuper(t[n])),t[n]=e[n])},_mergeModuleBase:function(t,e){var n;for(n in e)f(e,n)&&"__super__"!==n&&(t[n]=e[n])},_merge:function(t,e){var n={};return this._setSuper(n,t),this._mergeModuleBase(n,t),this._mergeModuleExtended(n,e),n},extend:function(t,e,n){var r,o,i,u,s,f,c;return c=this,r=m[t],o=t,i=function(){},"string"==typeof e?(o=e,i=n):i=e,typeof r!==g?(s=i(T),u=r.creator(T),m[o]=new O(o,function(t){return f=c._merge(u,s),f.__action__=t,f}),m[o]):void 0},setInstance:function(t,e,n){var r=m[t];if(!r)throw new Error("The module "+t+" is not registered!");return r.instances[e]=n,r},setVars:function(t){M=typeof M!==g?l(M,t):t},getVars:function(){return l({},M)},_multiModuleStart:function(e,n,r,i){var u,s,f,c,l,d;for(o(n)&&(u=n.slice(0)),o(r)&&(s=r.slice(0)),o(i)&&(f=i.slice(0)),c=0,l=e.length;l>c;c++)d=e[c],n=u&&u[c]||t(),r=s&&s[c]||r,i=f&&f[c]||i,a(this,d,n,r,i)},_singleModuleStart:function(e,n,r,o){"string"!=typeof n&&(r=n,o=r,n=t()),a(this,e,n,r,o)},start:function(t,e,n,r){var i=o(t);i?this._multiModuleStart(t.slice(0),e,n,r):this._singleModuleStart(t,e,n,r)},isModuleStarted:function(t,n){var r=!1;return r=typeof n===g?typeof m[t]!==g&&e(m[t].instances)>0:typeof m[t]!==g&&typeof m[t].instances[n]!==g},startAll:function(){var e,n;for(e in m)f(m,e)&&(n=m[e],typeof n!==g&&this.start(e,t()))},_multiModuleStop:function(t){var e,n,r=t.instances;for(e in r)f(r,e)&&(n=r[e],typeof t!==g&&typeof n!==g&&n.destroy());t.instances={}},_singleModuleStop:function(t,e,n){var r=t.instances[n];typeof t!==g&&typeof r!==g&&(r.destroy(),delete t.instances[n])},stop:function(t,e){var n;return n=m[t],typeof n===g?!1:(typeof e!==g?this._singleModuleStop(n,t,e):this._multiModuleStop(n),!0)},_stopOneByOne:function(t,e){var n;for(n in t)f(t,n)&&this.stop(e,n)},stopAll:function(){var t;for(t in m)f(m,t)&&typeof m[t]!==g&&this._stopOneByOne(m[t].instances,t)},_delete:function(t){typeof m[t]!==g&&delete m[t]},remove:function(t){var e=m[t];if(typeof e===g)return null;if(typeof e!==g)try{return e}finally{this._delete(t)}return null}},j=function(){},j.version=E,j.bus=T,j.errorHandler=y,j.setErrorHandler=b,j.module=new B,j.setUnblockUI=u,j.setDebug=i,j.getDebug=function(){return x},j.extend=function(t,e){this[t]=typeof this[t]===g?e:l(this[t],e)},j.noConflict=function(t,e,n){return typeof this[t]!==g?(e[n]=this[t],!0):!1},j.addExtensionBeforeInit=function(t){j.module.oModifyInit=l(j.module.oModifyInit,t)},O=function(t,e){if(typeof e===g)throw new Error("Something goes wrong!");this.creator=e,this.instances={},this.sModuleId=t},O.prototype={start:function(t){return j.module.start(this.sModuleId,t),this},extend:function(t,e){return j.module.extend(this.sModuleId,t,e),this},stop:function(){return j.module.stop(this.sModuleId),this}},v.Hydra=j,A?module.exports=j:"undefined"!=typeof define&&define("hydra",[],function(){return j})}.call(this);