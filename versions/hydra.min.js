(function(){var r,m,l,h,j,u,d,p,v,z,A,c,x,w;function k(){var B=+new Date()+"",C=Math.floor(Math.random()*(999999-1+1))+1;return B+"_"+C}function n(B){var D,C;if(Object.keys){D=Object.keys(B).length}else{D=0;for(C in B){if(B.hasOwnProperty(C)){D++}}}return D}if(typeof Object.create!=="function"){Object.create=function(B){function C(){}C.prototype=B;return new C()}}w=typeof exports==="object"&&typeof module==="object"&&typeof module.exports==="object"&&typeof require==="function";m="undefined";r=this;j=null;u=false;l={};d="2.5.3";v=u;x={};function s(B){return{}.toString.call(B)}function b(B){return s(B)==="[object Function]"}function a(B){v=B}function q(C,B){return[].slice.call(C,B||0)}function t(B,C){return B.hasOwnProperty(C)}function e(C,B){var D;for(D in B){if(t(B,D)){C[D]=B[D]}}return C}function g(C,E,D,B){C[E]=(function(G,F){return function(){var I=q(arguments,0);try{return F.apply(this,I)}catch(H){z.log(D,G,H)}finally{I=j}}}(E,B))}function i(C,E){var D,B;D=l[C].creator(E);D.__module_id__=C;B=D.init||function(){};D.__action__=E;D.oEventsCallbacks=D.oEventsCallbacks||{};D.aListeningEvents=(function(){var G=D.oEventsCallbacks,H,F=[];for(H in G){if(G.hasOwnProperty(H)){F.push(H)}}G=H=null;return F}());D.init=function(F){var G=q(arguments,0).concat(h);E.listen(this.aListeningEvents,this.handleAction,this);B.apply(this,G)};D.handleAction=function(G){var F=this.oEventsCallbacks[G.type];if(typeof F===m){return}F.call(this,G)};D.onDestroy=D.onDestroy||function(){};D.destroy=function(){this.onDestroy();E.stopListen(this.aListeningEvents,this)};return D}function o(D){var F,C,E,B;if(typeof l[D]===m){throw new Error("The module "+D+" is not registered!")}F=new c();E="";B=function(){};C=i(D,F);if(!v){for(E in C){if(t(C,E)){B=C[E];if(!b(B)){continue}g(C,E,D,B)}}}try{return C}finally{F=C=E=B=j}}z=r.console||{log:function(){}};A=function(){};A.prototype={type:"Module",getInstance:o,register:function(C,B){l[C]={creator:B,instances:{}};return l[C]},_merge:function(F,B){var C,E,D;C={};D=function(G){return function(){var H=q(arguments,0);G.apply(this,H)}};C.__super__={};C.__super__.__instance__=F;C.__super__.__call__=function(H,I){var G=this;while(t(G,H)===u){G=G.__instance__.__super__}G[H].apply(C,I)};for(E in F){if(t(F,E)){if(E==="__super__"){continue}C[E]=F[E]}}for(E in B){if(t(B,E)){if(typeof C.__super__!==m&&b(C[E])){C.__super__[E]=(D(C[E]))}C[E]=B[E]}}try{return C}finally{C=j;E=j}},extend:function(H,D,F){var C,G,L,E,I,B,K,J;K=this;C=l[H];G=H;L=function(M){return M};if(typeof D==="string"){G=D;L=F}else{L=D}if(typeof C===m){return}J=new c();I=L(J);E=C.creator(J);l[G]={creator:function(M){B=K._merge(E,I);B.__action__=M;return B},instances:{}}},setInstance:function(D,C,B){var E=l[D];if(!E){throw new Error("The module "+D+" is not registered!")}E.instances[C]=B;return E},setVars:function(B){if(typeof h!==m){h=e(h,B)}else{h=B}},getVars:function(){return e({},h)},start:function(D,C,G,F){var E,B;E=l[D];if(typeof C!=="string"){G=C;F=G;C=k()}if(F&&this.isModuleStarted(D,C)){this.stop(D,C)}if(typeof E!==m){B=o(D);E.instances[C]=B;B.__instance_id__=C;if(typeof G!==m){B.init(G)}else{B.init()}}E=j;return B},isModuleStarted:function(D,B){var C=false;if(typeof B===m){C=(typeof l[D]!==m&&n(l[D].instances)>0)}else{C=(typeof l[D]!==m&&typeof l[D].instances[B]!==m)}return C},startAll:function(){var B,C;for(B in l){if(t(l,B)){C=l[B];if(typeof C!==m){this.start(B,k())}}}B=j},stop:function(D,B){var F,C,G,E;F=l[D];if(typeof F===m){return false}if(typeof B!==m){C=F.instances[B];if(typeof F!==m&&typeof C!==m){C.destroy()}}else{G=F.instances;for(E in G){if(G.hasOwnProperty(E)){C=G[E];if(typeof F!==m&&typeof C!==m){C.destroy()}}}}F=C=j;return true},stopAll:function(){var C,D,B;for(C in l){if(t(l,C)){D=l[C];if(typeof D!==m){for(B in D.instances){if(t(D.instances,B)){this.stop(C,B)}}}}}C=j},_delete:function(B){if(typeof l[B]!==m){delete l[B]}},remove:function(B){var C=l[B];if(typeof C===m){return null}if(typeof C!==m){try{return C}finally{C=j;this._delete(B)}}}};c=function(){};c.prototype={type:"Action",listen:function(F,D,G){var C,B,E;C="";E=F.length;for(B=0;B<E;B=B+1){C=F[B];if(typeof x[C]===m){x[C]=[]}x[C].push({module:G,handler:D})}},notify:function(F){var H,G,B,D,C,E;E={};H=F.type;G=j;if(typeof x[H]===m){return}B=x[H].slice();C=B.length;if(v){E.type=H;E.executed={calls:C,actions:B};z.log(H,E)}for(D=0;D<C;D=D+1){G=B[D];G.handler.call(G.module,F)}H=B=D=C=G=j},stopListen:function(I,G){var C,F,B,E,H,D;C="";F=[];E=I.length;H=0;D=0;for(B=0;B<E;B=B+1){F=[];C=I[B];D=x[C].length;for(H=0;H<D;H=H+1){if(G!==x[C][H].module){F.push(x[C][H])}}x[C]=F;if(x[C].length===0){delete x[C]}}C=F=B=E=H=D=j},__restore__:function(){x={}}};function f(){return z}function y(B){z=B}p=function(){};p.version=d;p.action=function(){return new c()};p.errorHandler=f;p.setErrorHandler=y;p.module=new A();p.setDebug=a;p.extend=function(C,B){if(typeof this[C]===m){this[C]=B}else{this[C]=e(this[C],B)}};p.noConflict=function(C,B,D){if(typeof this[C]!==m){B[D]=this[C];return true}return false};r.Hydra=p;if(w){module.exports=p}else{if(typeof define!=="undefined"){define(function(){return p})}}}).call(this);