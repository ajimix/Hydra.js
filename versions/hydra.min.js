(function(){var u,n,l,g,j,w,c,r,x,C,E,A,m,y,z;function k(){var F=+new Date()+"",G=Math.floor(Math.random()*(999999-1+1))+1;return F+"_"+G}function o(F){var H,G;if(Object.keys){H=Object.keys(F).length}else{H=0;for(G in F){if(v(F,G)){H++}}}return H}if(typeof Object.create!=="function"){Object.create=function(F){function G(){}G.prototype=F;return new G()}}y=typeof exports==="object"&&typeof module==="object"&&typeof module.exports==="object"&&typeof require==="function";n="undefined";z=Object.prototype;u=this;j=null;w=false;l={};c="3.0.1";x=w;function t(F){return z.toString.call(F)}function b(F){return t(F)==="[object Function]"}function q(F){return t(F)==="[object Array]"}function a(F){x=F}function s(G,F){return[].slice.call(G,F||0)}function v(F,G){return F.hasOwnProperty(G)}function D(L,H,G,K,J){var I,F;I=l[H];if(J&&L.isModuleStarted(H,G)){L.stop(H,G)}if(typeof I!==n){F=p(H);I.instances[G]=F;F.__instance_id__=G;if(typeof K!==n){F.init(K)}else{F.init()}}return F}function d(G,F){var H;for(H in F){if(v(F,H)){G[H]=F[H]}}return G}function f(G,I,H,F){G[I]=(function(K,J){return function(){var M=s(arguments,0);try{return J.apply(this,M)}catch(L){C.log(H,K,L);return false}}}(I,F))}m={global:{}};function i(G,H){var F=[],I;if(typeof G!=="undefined"){for(I in G){if(v(G,I)&&I===H){F=G[I]}}}return F}A={subscribers:function(F,G){return i(m[F],G)},_getChannelEvents:function(K,G,J){var H,F,I;F=K[0];if(F==="global"){H=F;I=K[1]}else{H=G;I=J}if(typeof m[H][I]==="undefined"){m[H][I]=[]}return m[H][I]},_addSubscribers:function(J,H,G,K){var M,L,F,I=H||false;for(M in J){if(v(J,M)){L=M.split(":");if(I&&L[0]!=="global"||!I&&L[0]==="global"){continue}F=this._getChannelEvents(L,G,M);F.push({subscriber:K,handler:J[M]})}}},subscribe:function(F,H,G){if(typeof H.oEventsCallbacks==="undefined"){return false}if(typeof m[F]==="undefined"){m[F]={}}this._addSubscribers(H.oEventsCallbacks,G,F,H);return true},_removeSubscribers:function(H,I){var J,F=0,G=0;if(typeof H!==n){J=H.length;for(;F<J;F++){if(H[F].subscriber===I){G++;H.splice(F,1)}}}return G},_removeSubscribersPerEvent:function(O,M,N,L){var F,K,I,H,G=M||false,J;for(F in O){if(v(O,F)){K=F.split(":");if(G&&K[0]!=="global"||!G&&K[0]==="global"){continue}I=N;H=F;if(K[0]==="global"){I=K[0];H=K[1]}J=this._removeSubscribers(m[I][H],L)}}return J},unsubscribe:function(G,J,H){var F,I=J.oEventsCallbacks;if(typeof I==="undefined"||typeof m[G]==="undefined"){return false}F=this._removeSubscribersPerEvent(I,H,G,J);return F>0},publish:function(H,K,L){var G=this.subscribers(H,K),F=0,J=G.length,I;if(J===0){return false}for(;F<J;F++){I=G[F];I.handler.call(I.subscriber,L);C.log(H,K,I)}return true},reset:function(){m={global:{}}}};function h(G,I){var H,F;H=l[G].creator(I);H.__module_id__=G;F=H.init||function(){};H.__action__=I;H.oEventsCallbacks=H.oEventsCallbacks||{};H.init=function(){var J=s(arguments,0).concat(g);I.subscribe("global",H,true);F.apply(this,J)};H.handleAction=function(K){var J=this.oEventsCallbacks[K.type];if(typeof J===n){return}J.call(this,K)};H.onDestroy=H.onDestroy||function(){};H.destroy=function(){this.onDestroy();I.unsubscribe("global",H,true)};return H}function p(G){var F,H;if(typeof l[G]===n){throw new Error("The module "+G+" is not registered!")}F=h(G,A);if(!x){for(H in F){if(v(F,H)&&b(F[H])){f(F,H,G,F[H])}}}return F}C=u.console||{log:function(){}};E=function(){};E.prototype={type:"Module",getInstance:p,register:function(G,F){l[G]={creator:F,instances:{}};return l[G]},_setSuper:function(F,G){F.__super__={};F.__super__.__instance__=G;F.__super__.__call__=function(I,J){var H=this;while(v(H,I)===w){H=H.__instance__.__super__}H[I].apply(F,J)}},callInSuper:function(F){return function(){var G=s(arguments,0);F.apply(this,G)}},_mergeModuleExtended:function(G,F){var H;for(H in F){if(v(F,H)){if(typeof G.__super__!==n&&b(G[H])){G.__super__[H]=(this.callInSuper(G[H]))}G[H]=F[H]}}},_mergeModuleBase:function(F,H){var G;for(G in H){if(v(H,G)){if(G!=="__super__"){F[G]=H[G]}}}},_merge:function(H,F){var G={};this._setSuper(G,H);this._mergeModuleBase(G,H);this._mergeModuleExtended(G,F);return G},extend:function(L,H,J){var G,K,O,I,M,F,N;N=this;G=l[L];K=L;O=function(){};if(typeof H==="string"){K=H;O=J}else{O=H}if(typeof G===n){return}M=O(A);I=G.creator(A);l[K]={creator:function(P){F=N._merge(I,M);F.__action__=P;return F},instances:{}}},setInstance:function(H,G,F){var I=l[H];if(!I){throw new Error("The module "+H+" is not registered!")}I.instances[G]=F;return I},setVars:function(F){if(typeof g!==n){g=d(g,F)}else{g=F}},getVars:function(){return d({},g)},_multiModuleStart:function(J,O,G,I){var H,L,N,F,K,M;if(q(O)){H=O.slice(0)}if(q(G)){L=G.slice(0)}if(q(I)){N=I.slice(0)}for(F=0,K=J.length;F<K;F++){M=J[F];O=H&&H[F]||k();G=L&&L[F]||G;I=N&&N[F]||I;D(this,M,O,G,I)}},_singleModuleStart:function(G,F,I,H){if(typeof F!=="string"){I=F;H=I;F=k()}D(this,G,F,I,H)},start:function(H,F,J,I){var G=q(H);if(G){this._multiModuleStart(H.slice(0),F,J,I)}else{this._singleModuleStart(H,F,J,I)}},isModuleStarted:function(H,F){var G=false;if(typeof F===n){G=(typeof l[H]!==n&&o(l[H].instances)>0)}else{G=(typeof l[H]!==n&&typeof l[H].instances[F]!==n)}return G},startAll:function(){var F,G;for(F in l){if(v(l,F)){G=l[F];if(typeof G!==n){this.start(F,k())}}}},_multiModuleStop:function(H){var G,I=H.instances,F;for(G in I){if(v(I,G)){F=I[G];if(typeof H!==n&&typeof F!==n){F.destroy()}}}},_singleModuleStop:function(I,H,F){var G=I.instances[F];if(typeof I!==n&&typeof G!==n){G.destroy()}},stop:function(G,F){var H;H=l[G];if(typeof H===n){return false}if(typeof F!==n){this._singleModuleStop(H,G,F)}else{this._multiModuleStop(H)}return true},_stopOneByOne:function(H,G){var F;for(F in H){if(v(H,F)){this.stop(G,F)}}},stopAll:function(){var F;for(F in l){if(v(l,F)&&typeof l[F]!==n){this._stopOneByOne(l[F].instances,F)}}},_delete:function(F){if(typeof l[F]!==n){delete l[F]}},remove:function(F){var G=l[F];if(typeof G===n){return null}if(typeof G!==n){try{return G}finally{this._delete(F)}}return null}};function e(){return C}function B(F){C=F}r=function(){};r.version=c;r.bus=A;r.errorHandler=e;r.setErrorHandler=B;r.module=new E();r.setDebug=a;r.getDebug=function(){return x};r.extend=function(G,F){if(typeof this[G]===n){this[G]=F}else{this[G]=d(this[G],F)}};r.noConflict=function(G,F,H){if(typeof this[G]!==n){F[H]=this[G];return true}return false};u.Hydra=r;if(y){module.exports=r}else{if(typeof define!=="undefined"){define(function(){return r})}}}.call(this));